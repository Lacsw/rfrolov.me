---
title: "Building a Custom Status Line for Claude Code"
description: "How to create a rich, informative status line showing model info, context usage, and git status in Claude Code CLI."
date: "2026-01-19"
tags: ["claude-code", "bash", "cli", "developer-tools"]
featured: true
---

Claude Code supports custom status lines via bash scripts. Here's how to build one that shows model, context usage, and git status at a glance.

## Result

<div className="my-6 rounded-lg bg-[#1a1a1a] p-4 font-mono text-sm">
  <span style={{color: '#00BFFF'}}>Opus 4.5</span>
  <span style={{color: '#9ca3af'}}> [====      ] </span>
  <span style={{color: '#FACC15'}}>43%</span>
  <span style={{color: '#9ca3af'}}> | 86k/200k | </span>
  <span style={{color: '#00BFFF'}}>rfrolov.me</span>
  <span style={{color: '#60a5fa'}}>(</span>
  <span style={{color: '#f87171'}}>main</span>
  <span style={{color: '#60a5fa'}}>)</span>
  <span style={{color: '#FACC15'}}> ✗</span>
</div>

## Setup

Add to `~/.claude/settings.json`:

```json
{
  "statusLine": {
    "type": "command",
    "command": "bash ~/.claude/statusline.sh"
  }
}
```

Create `~/.claude/statusline.sh` and make it executable (`chmod +x`):

<CollapsibleCode title="~/.claude/statusline.sh">
```bash
#!/bin/bash

input=$(cat)

# Extract data
model_name=$(echo "$input" | jq -r '.model.display_name // .model.id')
cwd=$(echo "$input" | jq -r '.workspace.current_dir')
project_dir=$(echo "$input" | jq -r '.workspace.project_dir')
total_input=$(echo "$input" | jq -r '.context_window.total_input_tokens // 0')
context_size=$(echo "$input" | jq -r '.context_window.context_window_size // 0')
used_pct=$(echo "$input" | jq -r '.context_window.used_percentage // 0' | cut -d. -f1)

# Shorten model name
short_model="$model_name"
[[ "$model_name" =~ Opus ]] && short_model="Opus 4.5"
[[ "$model_name" =~ Sonnet ]] && short_model="Sonnet 4"
[[ "$model_name" =~ Haiku ]] && short_model="Haiku 3.5"

# Format tokens (42000 -> 42k)
format_tokens() {
    local n=$1
    [ "$n" -ge 1000 ] && echo "$((n / 1000))k" || echo "$n"
}
tokens_display=$(format_tokens "$total_input")
context_display=$(format_tokens "$context_size")

# Progress bar
bar_width=10
filled=$((used_pct * bar_width / 100))
empty=$((bar_width - filled))
progress_bar="["
for ((i=0; i<filled; i++)); do progress_bar+="="; done
for ((i=0; i<empty; i++)); do progress_bar+=" "; done
progress_bar+="]"

# Git info
project_name=$(basename "$project_dir")
git_branch=""
if git -C "$cwd" rev-parse --git-dir > /dev/null 2>&1; then
    git_branch=$(git -C "$cwd" symbolic-ref --short HEAD 2>/dev/null || \
                 git -C "$cwd" rev-parse --short HEAD 2>/dev/null)
fi

# Colors
CYAN=$'\033[36m' YELLOW=$'\033[33m' RED=$'\033[31m' BLUE=$'\033[34m' RESET=$'\033[0m'

# Build output
if [ -n "$git_branch" ]; then
    dirty=""
    git -C "$cwd" diff-index --quiet HEAD -- 2>/dev/null || dirty=" ${YELLOW}✗${RESET}"
    git_status="${CYAN}${project_name}${RESET}${BLUE}(${RED}${git_branch}${BLUE})${RESET}${dirty}"
else
    git_status="${CYAN}${project_name}${RESET}"
fi

echo "${CYAN}${short_model}${RESET} ${progress_bar} ${YELLOW}${used_pct}%${RESET} | ${tokens_display}/${context_display} | ${git_status}"
```
</CollapsibleCode>

## Available Data

Claude Code passes JSON to stdin with this structure:

```json
{
  "model": { "id": "claude-opus-4-5-20251101", "display_name": "Claude Opus 4.5" },
  "context_window": {
    "used_percentage": 21.5,
    "total_input_tokens": 42000,
    "total_output_tokens": 8500,
    "context_window_size": 200000
  },
  "cost": { "total_cost_usd": 0.42 },
  "workspace": { "current_dir": "/path/to/project", "project_dir": "/path/to/project" }
}
```

<Callout variant="warning">
  **Rate limits not available.** Hourly usage limits (Settings → Plan usage limits) aren't exposed to statusline scripts. [Feature request](https://github.com/anthropics/claude-code/issues/18121).
</Callout>

## Customization

**Alternative progress bars:**

```bash
# Blocks: [▓▓▓░░░░░░░]
for ((i=0; i<filled; i++)); do progress_bar+="▓"; done
for ((i=0; i<empty; i++)); do progress_bar+="░"; done

# Dots: [●●●○○○○○○○]
for ((i=0; i<filled; i++)); do progress_bar+="●"; done
for ((i=0; i<empty; i++)); do progress_bar+="○"; done
```

**Color-coded percentage:**

```bash
[ "$used_pct" -lt 50 ] && pct_color=$'\033[32m' || \
[ "$used_pct" -lt 80 ] && pct_color=$'\033[33m' || pct_color=$'\033[31m'
```

**Show session cost:**

```bash
cost=$(echo "$input" | jq -r '.cost.total_cost_usd // 0')
# Add to output: | \$${cost}
```

<Callout variant="tip">
  Keep scripts fast - they run on every status update. Avoid network calls.
</Callout>

## Conclusion

A custom status line transforms Claude Code from a black box into a transparent tool. You can see at a glance which model you're using, how much context remains, and whether you have uncommitted changes. The script is fully customizable - adjust colors, add metrics, or simplify to your liking.
